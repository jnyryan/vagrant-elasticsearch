input {
 file {
	type => "nginx_access"
	path => ["/var/log/nginx/**"]
	exclude => ["*.gz”, “error.*"]
	discover_interval => 10
 }
}

# We need to tell the filters (grok, date) that we want to act on the nginx
# type otherwise it won't do anything
filter {
	grok {
		type => "nginx"
		patterns_dir => "./patterns"
		pattern => "%{NGINXACCESS}"
		#pattern => “%{COMBINEDAPACHELOG}”
	}
	date {
		type => "nginx"
		locale => "en"
		match => [ "time_local" , "dd/MMM/YYYY:HH:mm:ss Z" ]
	}
}

output {
	elasticsearch {
		embedded => true
	}
	stdout {
		debug => true
		debug_format => json
	}
}